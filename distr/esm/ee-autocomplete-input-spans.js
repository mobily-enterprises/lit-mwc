function _templateObject3(){var a=_taggedTemplateLiteral(["\n        :host {\n          display: inline;\n        }\n        :host(:focus) {\n          outline: none;\n        }\n\n        #list > span {\n          position: relative;\n          display: inline-block;\n        }\n\n        #list > span > *:not(button) {\n          position: relative;\n          display: inline-block;\n          padding: 3px 6px;\n          padding-right: 24px;\n          border: 1px solid #ddd;\n          border-radius: 1em;\n          margin: 2px;\n          vertical-align: middle;\n          line-height: 1em;\n        }\n\n        #list > span > *:not(button)[invalid] {\n          background-color: pink;\n          border-color: red;\n        }\n\n        #list > span:active > *:not(button), #list > span:focus > *:not(button), #list > span:hover > *:not(button) {\n          box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);\n          background-color: #eee;\n          outline: none;\n        }\n        #list > span:active > *:not(button), #list > span:focus > *:not(button) {\n          border-color: var(--nn-primary-color, #ccc);\n        }\n\n        #list > span button.remove {\n          appearance: none;\n          -moz-appearance: none;\n          -webkit-appearance: none;\n          fill: #999;\n          border: none;\n          padding: 0;\n          display: inline-block;\n          position: absolute;\n          top: 55%;\n          right: 4px;\n          transform: translateY(-50%);\n          background: none;\n          z-index:0;\n        }\n\n        #list > *:focus, #list > span *:active {\n          outline: none;\n        }\n\n        #list > span button.remove svg {\n          z-index: -1;\n        }\n\n        #list > span button.remove:hover {\n          fill: #555;\n        }\n\n        input {\n          box-sizing: border-box;\n          display: inline-block;\n          outline: none;\n          vertical-align: middle;\n          height: 1.5em;\n          border: none;\n          font-size: 0.9em;\n          width: 120px;\n        }\n\n        input:focus, input:hover {\n          outline: none\n        }\n\n        span.error-message {\n          color: red;\n        }\n\n        :invalid {\n          background-color: pink;\n          border: var(--nn-input-border-invalid, 1px solid #bb7777);\n        }\n      "]);return _templateObject3=function(){return a},a}function _templateObject2(){var a=_taggedTemplateLiteral(["\n      <span class=\"error-message\">\n        ","\n      </span>\n    "]);return _templateObject2=function(){return a},a}function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(b,!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(b).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _templateObject(){var a=_taggedTemplateLiteral(["\n      ","\n      ","\n      ","\n      <div id=\"list\" @click=\"","\">\n        <input @keydown=\"","\" @input=\"","\" rows=\"1\" id=\"ta\" spellcheck=\"false\" autocomplete=\"false\" autocapitalize=\"off\" autocorrect=\"off\" dir=\"ltr\" role=\"combobox\" aria-autocomplete=\"list\">\n      </div>\n      ","\n      ","\n      <input id=\"ni\" type=\"hidden\" name=\"","\">\n    "]);return _templateObject=function(){return a},a}function _taggedTemplateLiteral(a,b){return b||(b=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(b)}}))}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _get(a,b,c){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(a,b,c){var d=_superPropBase(a,b);if(d){var e=Object.getOwnPropertyDescriptor(d,b);return e.get?e.get.call(c):e.value}},_get(a,b,c||a)}function _superPropBase(a,b){for(;!Object.prototype.hasOwnProperty.call(a,b)&&(a=_getPrototypeOf(a),null!==a););return a}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}import{c as css,h as html,L as LitElement}from"./lit-element-97ae09cb.js";import{L as LabelsMixin}from"./LabelsMixin-c00a1c1e.js";import{S as StyleableMixin}from"./StyleableMixin-6a125586.js";import{T as ThemeableMixin}from"./ThemeableMixin-af62e1ed.js";var EeAutocompleteInputSpans=/*#__PURE__*/function(a){function b(){var a;return _classCallCheck(this,b),a=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this)),a.labelForElement="ni",a.valueAs="text",a.removeIcon="<svg class=\"icon\" height=\"15\" viewBox=\"0 0 24 24\" width=\"15\"><path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"></path></svg>",a.itemElement="",a.itemElementConfig={},a.itemElementAttributes={},a.shownValidationMessage="",a.validator=function(){return""},a.validationMessagePosition="before",a.valueSeparator=",",a.validity={valid:!0,_customValidationMessage:""},a}return _inherits(b,a),_createClass(b,null,[{key:"properties",get:function get(){return{name:{type:String},valueAs:{type:String,attribute:"value-as"},valueSeparator:{type:String,attribute:"value-separator"},validationMessagePosition:{type:String,attribute:"validation-message-position"},shownValidationMessage:{type:String,attribute:!1},validity:{type:Object,attribute:!1},validator:{type:Function}}}}]),_createClass(b,[{key:"render",value:function render(){return html(_templateObject(),this.customStyle,this.ifLabelBefore,this.ifValidationMessageBefore,this._listClicked,this._handleKeyEvents,this._inputReceived,this.ifValidationMessageAfter,this.ifLabelAfter,this.name)}},{key:"connectedCallback",value:function connectedCallback(){_get(_getPrototypeOf(b.prototype),"connectedCallback",this).call(this),this.addEventListener("click",this.focus)}},{key:"disconnectedCallback",value:function disconnectedCallback(){_get(_getPrototypeOf(b.prototype),"connectedCallback",this).call(this),this.removeEventListener("click",this.focus)}},{key:"firstUpdated",value:function firstUpdated(){this._updateNativeInputValue()}},{key:"focus",value:function focus(){this.shadowRoot.querySelector("#ta").focus()}},{key:"_listClicked",value:function _listClicked(a){a.stopPropagation()}},{key:"setCustomValidity",value:function setCustomValidity(a){""===a?(this.validity={valid:!0,_customValidationMessage:""},this.toggleAttribute("valid",!0),""==a&&(this.shownValidationMessage="")):(this.validity={valid:!1,customError:!0,_customValidationMessage:a},this.toggleAttribute("valid",!1))}},{key:"reportValidity",value:function reportValidity(){// Run custom validator. Note that custom validator
// will only ever run on filed without an existing customError.
// This is because
if(!this.validity.customError){var a=this.validator();a&&this.setCustomValidity(a)}// Hide the error message by default
return this.shownValidationMessage="",this.validity.valid?(this.toggleAttribute("valid",!0),!0):(this.toggleAttribute("valid",!1),this.shownValidationMessage=this.validity._customValidationMessage,this.dispatchEvent(new CustomEvent("invalid",{cancelable:!0,bubbles:!1,composed:!0})),!1)}},{key:"checkValidity",value:function checkValidity(){if(!this.native.validity.customError){var a=this.validator();a&&this.setCustomValidity(a)}return!!this.validity.valid||(this.dispatchEvent(new CustomEvent("invalid",{cancelable:!0,bubbles:!1,composed:!0})),!1)}},{key:"_pickCurrentValue",/* END OF CONSTRAINTS API */ // Run this when there are no suggestions and the user hits Tab or Enter in #ta
// This will run pickElement with a STRING, which will get the element to
// work out a data structure based on the string
value:function _pickCurrentValue(){"text"===this.valueAs&&this.pickedElement(this.shadowRoot.querySelector("#ta").value,!0)}},{key:"_askToRemove",value:function _askToRemove(a){var b=a.currentTarget;this._removeItem(b.parentElement.parentElement)}},{key:"_updateNativeInputValue",value:function _updateNativeInputValue(){var a=this.shadowRoot.querySelector("#ni");a.value=this.value}},{key:"_removeItem",value:function _removeItem(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"previous",c=a.previousElementSibling||a.nextElementSibling;c.focus(),a.remove(),this._updateNativeInputValue(),this.setCustomValidity(""),this.reportValidity()}},{key:"_createRemoveBtn",value:function _createRemoveBtn(){var a=document.createElement("button");return a.innerHTML=this.removeIcon,a.onclick=this._askToRemove.bind(this),a.classList.add("remove"),a}},{key:"_handleKeyEvents",value:function _handleKeyEvents(a){var b=a.currentTarget;switch(a.key){case"ArrowLeft":b.previousElementSibling&&(a.preventDefault(),b.previousElementSibling.focus());break;case"ArrowRight":"ta"!==b.id&&(a.preventDefault(),b.nextElementSibling?b.nextElementSibling.focus():b.parentElement.firstElementChild.focus());break;case"ArrowDown":this.parentElement.suggestions.length&&(a.preventDefault(),this.parentElement.focusNext());break;case"Backspace":case"Delete":"ta"===b.id&&1<b.parentElement.children.length&&!b.value?this._removeItem(b.previousElementSibling):"ta"!==b.id&&this._removeItem(b);break;case"Tab":case"Enter":if(!this.autocompleteValue)break;this.parentElement.suggestions.length?(a.preventDefault(),this.parentElement.pickFirst()):(a.preventDefault(),this._pickCurrentValue());}}/* API */},{key:"pickedElement",value:function pickedElement(a){var b=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],c=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],d=document.createElement(this.itemElement),e=new d.constructor.PickedElement;e.config=_objectSpread({},e.config,{},this.itemElementConfig);for(var f,g=0,h=Object.keys(this.itemElementAttributes);g<h.length;g++)f=h[g],e.setAttribute(f,this.itemElementAttributes[f]);// Convert string into data if necessary
if("string"==typeof a){if(!a.length)return;if(a=d.stringToData(a),!a.valid&&(e.toggleAttribute("invalid",!0),!b))return}e.data=a;var i=this.shadowRoot.querySelector("#list"),j=document.createElement("span");j.setAttribute("tabindex",-1);var l=this.shadowRoot.querySelector("#ta"),m=this._createRemoveBtn();j.onkeydown=this._handleKeyEvents.bind(this),m.setAttribute("tabindex",-1),j.appendChild(e),e.appendChild(m),i.insertBefore(j,l),l.value="",this._updateNativeInputValue(),c||(this.setCustomValidity(""),this.reportValidity())}},{key:"setPickedElement",value:function setPickedElement(a,b,c){this.itemElement=a,this.itemElementConfig=b,this.itemElementAttributes=c}},{key:"value",get:function get(){var a,b;switch(this.valueAs){case"json":a={},b=this.shadowRoot.querySelector("#list");var c=!0,d=!1,e=void 0;try{for(var f,g,h=b.children[Symbol.iterator]();!(c=(f=h.next()).done);c=!0)if(g=f.value,"ta"!==g.id){var i=g.firstChild.idValue;a[i]=g.firstChild.data}}catch(a){d=!0,e=a}finally{try{c||null==h["return"]||h["return"]()}finally{if(d)throw e}}return a;default:a=[],b=this.shadowRoot.querySelector("#list");var j=!0,k=!1,l=void 0;try{for(var m,n,o=b.children[Symbol.iterator]();!(j=(m=o.next()).done);j=!0)n=m.value,"ta"===n.id||("text"===this.valueAs?null===n.getAttribute("invalid")&&a.push(n.firstChild.textValue):a.push(n.firstChild.idValue))}catch(a){k=!0,l=a}finally{try{j||null==o["return"]||o["return"]()}finally{if(k)throw l}}return a.join(this.valueSeparator);}},set:function set(a){// Remove all children
for(var t=this.shadowRoot.querySelector("#list");t.firstChild&&"ta"!==t.firstChild.id;)t.removeChild(t.firstChild);// Assign all children using pickedElement
if(Array.isArray(a)){var b=!0,c=!1,d=void 0;try{for(var e,f,g=a[Symbol.iterator]();!(b=(e=g.next()).done);b=!0)f=e.value,this.pickedElement(f,!1,!0)}catch(a){c=!0,d=a}finally{try{b||null==g["return"]||g["return"]()}finally{if(c)throw d}}}else if("object"===_typeof(a)&&null!==a)for(var h=0,i=Object.keys(a);h<i.length;h++){var j=i[h],k=a[j];this.pickedElement(k,!1,!0)}else if("string"==typeof a){var l=!0,m=!1,n=void 0;try{for(var p,q,r=a.split(this.valueSeparator)[Symbol.iterator]();!(l=(p=r.next()).done);l=!0)q=p.value,this.pickedElement(q,!1,!0)}catch(a){m=!0,n=a}finally{try{l||null==r["return"]||r["return"]()}finally{if(m)throw n}}}// Sets the native input
this._updateNativeInputValue(),this.setCustomValidity(""),this.reportValidity()}},{key:"validationMessage",get:function get(){return this.validity._customValidationMessage}},{key:"ifValidationMessageBefore",get:function get(){return"after"===this.validationMessagePosition?"":this.validationMessageTemplate}},{key:"ifValidationMessageAfter",get:function get(){return"before"===this.validationMessagePosition?"":this.validationMessageTemplate}},{key:"validationMessageTemplate",get:function get(){return html(_templateObject2(),this.shownValidationMessage)}},{key:"autocompleteValue",get:function get(){var a=this.shadowRoot.querySelector("#ta");return a?a.value:""}},{key:"multiInputApi",get:function get(){return!0}},{key:"textInputValue",get:function get(){var a=this.shadowRoot.querySelector("#ta");return a?a.value:""}}],[{key:"styles",get:function get(){return[_get(_getPrototypeOf(b),"styles",this)||[],css(_templateObject3())]}}]),b}(ThemeableMixin("ee-autocomplete-input-spans")(LabelsMixin(StyleableMixin(LitElement))));window.customElements.define("ee-autocomplete-input-spans",EeAutocompleteInputSpans);